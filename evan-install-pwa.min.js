(function(){"use strict";const EvanInstallPWA=function(options){if(!(this instanceof EvanInstallPWA)){return new EvanInstallPWA(options)}this.options=Object.assign({},{swJsPath:null,},options);this.init()};EvanInstallPWA.prototype={fnOnInstall(){window.addEventListener("appinstalled",()=>{window.deferredPrompt=null;console.log("ğŸ‘","PWAå·²å®‰è£…æˆåŠŸ")});window.addEventListener("beforeinstallprompt",(event)=>{event.preventDefault();console.log("ğŸ˜©","PWAæœªå®‰è£…",event);window.deferredPrompt=event})},init(){const _this=this;$(function(){if(!_this.options.swJsPath){console.error("ğŸ˜Ÿ","è¯·é…ç½® [ evan-install-service-worker.js ] æ–‡ä»¶è·¯å¾„ï¼Œå‚æ•°ä¸ºã€swJsPathã€‘");return}if("serviceWorker"in navigator){navigator.serviceWorker.register(_this.options.swJsPath).then((res)=>{_this.fnOnInstall()}).catch((err)=>{console.log("ğŸ˜Ÿ","ä¸æ”¯æŒPWAå®‰è£…")})}else{console.log("ğŸ˜Ÿ","ä¸æ”¯æŒPWAå®‰è£…")}})},};window.EvanInstallPWA=EvanInstallPWA})();