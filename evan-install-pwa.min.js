(function(){"use strict";const EvanInstallPWA=function(options){if(!(this instanceof EvanInstallPWA)){return new EvanInstallPWA(options)}this.options=Object.assign({},{swJsPath:null,},options);this.init()};EvanInstallPWA.prototype={fnOnInstall(){window.addEventListener("appinstalled",()=>{window.deferredPrompt=null;console.log("👍","PWA已安装成功")});window.addEventListener("beforeinstallprompt",(event)=>{event.preventDefault();console.log("😩","PWA未安装",event);window.deferredPrompt=event})},init(){const _this=this;$(function(){if(!_this.options.swJsPath){console.error("😟","请配置 [ evan-install-service-worker.js ] 文件路径，参数为【swJsPath】");return}if("serviceWorker"in navigator){navigator.serviceWorker.register(_this.options.swJsPath).then((res)=>{_this.fnOnInstall()}).catch((err)=>{console.log("😟","不支持PWA安装")})}else{console.log("😟","不支持PWA安装")}})},};window.EvanInstallPWA=EvanInstallPWA})();